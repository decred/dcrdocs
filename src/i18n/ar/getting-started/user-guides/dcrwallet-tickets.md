# شراء تذاكر مع dcrwallet

أخر تحديث هو v1.0.0

هذا الدليل وتهدف للتواصل من خلال شراء التذاكر باستخدام `dcrwallet`. حيث أنها سوف تغطي كل من التذاكر اليدوية والتذاكر التلقائية للتصويت منفردا وتكوين التصويت في ساحة الإقتراع.

**Prerequisites:**

-   إستخدم الأحدث من [dcr تثبيت](/getting-started/user-guides/cli-installation.md) لتثبيت `dcrd`, `dcrwallet,` و `dcrctl`. بالإضافة إلى الخطوات التي تتطلب متطلبات وتعليمات لإستخدامها.
-   قم بمراجعة إطلاق الأوامر لموجه الاوامر (Windows)  وBash (macOS/Linux) الذي قد يختلف [هنا](/getting-started/cli-differences.md).
-   [إعداد  dcrd]/getting-started/user-guides/dcrd-setup.md)  والعمل على خلفية تشغيلها.
-   [إعداد  dcrwallet](/getting-started/user-guides/dcrwallet-setup.md)  واالعمل على خلفية تشغيلها.
-   تعرف على نفسك من خلال [عملية التعميد](/getting-started/user-guides/dcrctl-basics.md).
-   تعرف على نفسك من خلال [عملية التعميد](/mining/proof-of-stake.md#staking-101) و [وتذاكر الحياة على شكل حلقات](/mining/proof-of-stake.md#ticket-lifecycle)

هذا الدليل يفترض أنه يمكنك إعداد  `dcrd` و `dcrwallet`  من خلال ضبط الملفات. وإذا قمت بإستخدام `dcrinstall` فإنه سيكون لديك ضبط ملفات جاهز. يوصى بشدة باستخدام ملفات التكوين - فإنه يجعل لتسهيل وقت إصدار الأوامر ل `dcrwallet` و `dcrd` خلال `dcrctl`. وهو دليل للحد الأدنى من التهيئة ( حفظ إسم  RPC و كلمة المرور الخاصة بك) ويمكن إيجادها [هنا ](/advanced/manual-cli-install.md#minimum-configuration).

ملاحظة : `dcrwallet.conf`  يتم تقسيمها إلى قسمين لتسمية `[Application Options]` و `[Ticket Buyer Options]`. أي  إعداد مسبوقة من قبل 'ticketbuyer.'  يجب أن توضع في أسفل قسم `[Ticket Buyer Options]`. وكل الإعدادات الأخرى تذهب ضمن `[Application Options]`.

---

## النقاش

هناك العديد من النقاشات التي يمكن عملها قبل المغامرة بهذا الدليل. أولا, سيتم إستخدام تجمع الحصص لتفويض تصويت التذكرة؟ ثانيا, يمكنك شراء التذكرة يدويا أو تلقائيا عبر ميزة التذاكر؟

تجمع الحصص يسمح لحامل الأسهم بتفويض حقوق التصويت. وهذه التجمعات تبقى بشكل علني أغلب الأوقات (24/7) وغالبا ما تفقد التصويت. حيث أنها تستخدم معاملات متعددة ليتمكنوا من لمس dcr الخاص بك, كما أن هناك جانب سلبي, يتطلب نسب مئوية صغيرة لمكافئة التصويت كما في رسوم الحصص, لاحظ أن تفويض التذاكر يتطلب حجم صفقة أكبر (~ 540 بايت مقابل.   ~ 300 بايت للتذاكر التصويت منفردا) لشراء ما يؤدي لرسوم أعلى لتذكرة مطلقة, لأن الرسوم تحسب بواسطة DCR/kB.

التصويت المنفرد يتطلب أن تكون دائرة التصويت لك مقفلة في جميع الأوقات (24/7),وإلا فإنك سوف تفقد الأصوات وتفقد المكافأة الخاصة بك, إذا لم يكن لديك رسوم لشراء التذاكر الخاصة بك حيث أنها من المرجح أن تكون أكثر عرضة لإستخراج رسوم اصغر ( بسبب عمال لإختيار التذاكر على DCR/kB لمعادلات رسوم التذاكر مع TXN أصغر حجما).

شراء التذاكر اليدوية مقابل شراء مشتري التذاكر الآلية وهو أساسا تفضيل شخصي. ونجد أن الفوائد العادية تنطبق على تذكرة المشتري, ولكن قد تكون طغت العديد من المتغيرات المبلغ التي يمكن تكوينها. أيضا، حساب رسوم المشتري للتذكرة في بعض الأحيان مما يؤدي إلى رسوم أكثر إقتصاد لأصحاب المصلحة.

---

## التصويت المنفرد

التذكير:  التصويت المنفرد مع محفظة التصويت التي تبقى على الإنترنت 24\7  قد يؤدي إلى أصوات لم يرد عليها والمكافآت حصة مصادرة.

للتصويت المنفرد, يمكنك ببساطة تعيين إن التصويت لتكون قادرة على بدء `dcrwallet`، وفتح المحفظة مع عبارة المرور الخاصة بك، وشراء التذاكر لتتمكن من التصويت  `dcrwallet` مقفلة، وسيتم التصويت تلقائي من محفظتك.

لإعداد `dcrwallet` الخاص بك منفردا, أضف السطر التالي من `dcrwallet.conf` في ملف التهيئة في قسم `[خيارات التطبيق]`:

قدرة التصويت=1

مرة واحدة إعادة تشغيل مع هذا الخط في `dcrwallet.conf` محفظتك لتكوين تصويت منفرد يمكنك في البدء [شراء التذاكر](#ticket-purchasing).

---

## تصويت تجمع الحصص

للسماح لأحد أصحاب المصلحة بالتصويت نيابة عنك، عليك أولا أن تسجل للحصول على حصة. قائمة بها يمكن العثور عليها [هنا](/mining/proof-of-stake.md#list-of-stakepools). عد الاشتراك، يجب أن تكون هناك اتجاهات لخلق عنوان P2SH واستيراد النص المتعدد للتصويت. لمحة عامة موجزة هنا:

1.  مع محفظتك مفتوحة، إصدار `دركتل --wallet الحصول على أمر عنوان جديد` لاسترداد عنوان.
2.  باستخدام هذا العنوان، إصدار `dcrctl --wallet التحقق من صحة العنوان<address from step 1>` سيعود هذا الكائن JSON الذي سيتم عرضه على الشكل التالي:

```
{
  "isvalid": true,
  "address": "DsExampleAddr1For2Demo3PurposesOnly",
  "ismine": true,
  "pubkeyaddr": "DkExample0Addr1For2Demo4Purposes5Only6Do7Not8Use9Pls0",
  "pubkey": "022801337beefc0ffee1dab8d4ffa898a782466c9a1fc00ca8863de5438dc07dcc",
  "iscompressed": true,
  "account": "voting"
}
```

3.  إنسخ  `pubkeyaddr` في تجمع الحصص "إرسال عنوان" كشكل واضغط على زر تقديم. يجب أن تعيد الصفحة توجيهك إلى صفحة التذاكر، والتي ستعرض المزيد من الإرشادات.
4.  ويمكن أن ترى في أعلى صفحة التذاكر، سترى قسم "معلومات التذاكر".  قم بنسخ "استرداد النص البرمجي" وقم بإستخدام هذه القضية ل `dcrctl --wallet لإستيراد الأوامر النصية `<Insert Redeem Script Here>

مع تكوين حصة التجمع الخاص بك أي النصي المتعدد لمحفظتك بحيث يمكنك البدء ب [شراء تذاكر](#ticket-purchasing).

---

## شراء التذاكر

كل من شراء التذاكر اليدوي والتلقائي يتطلب أن تكون محفظتك غير مغلقة من خلال اوامر  `dcrctl --wallet walletpassphrase  <private passphrase><time limit>`.

وهنالك ثلاثة أمور تتطلب الفهم قبل شراء التذاكر: وهي أمر `purchaseticket` , أين\ ولماذا تعد التذكرة  `ticketfee`  مهمة , وأهمية `ticket price`. 

> أمر شراء التذاكر

سيتم استخدام أمر `شراء التذاكر` لشراء التذاكر سواء اليدوية أو التلقائية. دعونا نلقي نظرة فاحصة في هذا الأمر وحجمه:

```
purchaseticket "fromaccount" spendlimit (minconf=1 "ticketaddress" numtickets "pooladdress" poolfees expiry "comment")
```

1.  `fromaccount`   =   السلسلة المطلوبة تتضمن : الحساب الذي سيتم شراء التذاكر منه (على سبيل المثال "الافتراضي").
2.  `spendlimit` = الرقم المطلوب يتضمن: تحديد المبلغ الذي سيتم إنفاقه على التذكرة (على سبيل المثال 50).
3.  `minconf` = الرقم الاختياري يتضمن : الحد الأدنى لعدد تأكيدات الحظر المطلوبة (مثل 1).
4.  `ticketaddress` = السلسلة الإختيارية تتضمن: عنوان التذكرة الذي يتم منح حقوق التصويت له
5.  `numtickets` =  الرقم الإختياري يتضمن: عدد التذاكر للشراء بدفعه واحدة (على سبيل المثال 1)
6.  `pooladdress` = اختياري سلسلة: عنوان لدفع رسوم الحصة.
7.  `poolfees` = الرقم الإختياري يتضمن: النسبة المئوية للرسوم التي تدفع إلى مجموعة الأسهم (على سبيل المثال 5)
8.  `expiry` = الرقم الإختياري يتضمن: ارتفاع كتلة حيث تذاكر الغير مكتملة حيث أنها سوف تنتهي من تجمع المذكرة، وعودة Dcr الأصلي إلى الخاص بك "من حساب". حيث أنك إن تركتها فارغه فإن التذاكر تتنتهي عادة عند تغيير سعرها.
9.  `comment` =  سلسلة اختيارية: وهي تلك الوسيط الغير مستخدم وليس لها دلالة.

> رسوم التذاكر

`تذكرتك` هو معدل DCR/kB بايت الذي ستدفعه لإدراج تذكرة شراء الخاص بك في كتلة من قبل عامل منجم.  وسوف تلاحظ أن `أمر شراء التذاكر` لا يتضمن أي`وسيط التذاكر`  . حيث أن `وسيط التذاكر`  يتضمن طريقتين.

1.  أثناء بدء التشغيل عن طريق إضافة `رسوم التذاكر=<fee rate>` في `[خيارات التطبيق]` في محفظتك  `dcrwallet.conf`.
2.  في حين يتم تشغيل محفظتك، وذلك باستخدام `dcrctl --walletأمر تعين محفظة التذاكر <fee rate>`. هذا الإعداد ليس دائم حيث إنك سيتم إعدادك افتراضيا إلى 0.01 في كل مرة يتم إعادة تشغيل المحفظة الخاصة بك إلا إذا تم تحديد التذاكر في `dcrwallet.conf`.

لماذا يعد تعين التذاكر أمر مهم؟ عادة ما يكون الرسم الافتراضي 0.01 يكفي للحصول على التذاكر الخاصة بك. ويستثنى من ذلك خلال حادثة حرب. عندما ينخفض سعر التذكرة منخفضا جدا، يفوق الطلب العرض (لا يوجد سوى 2880 تذكرة كحد أقصى متوفرة في كل فترة زمنية).  هذا يخلق حرب رسوم، مع أصحاب المصلحة المتنافسة للحصول على تذاكرهم الدائمة قبل تغير الأسعار.

في حال تم أخد هذين الأمرين في الإعتبار, دعونا نواصل الطريقتين لشراء التذاكر.

> سعر التذكرة

للحصول سعر التذكرة الحالي, إصدار الأمر  `dcrctl --wallet للحصول على معلومات حول الحصة`  والبحث عن`الصعوبة`القيمة. وهذا السعر لكل من التذاكر هو السعر الحالي في النافذة المتاحة.  ستحتاج إلى تعديل حجة `إنفاق الإنفاق` في أمر` تذكرة الشراء` لتكون أكبر من قيمة `الصعوبة`عند شراء التذاكر يدويا.

---

### شراء التذاكر اليدوي

قبل شراء التذاكر اليدوي,  فمن المستحسن للتحقق من وجودرسوم تذكرة وضبط رسوم التذاكر الخاصة بك قبل الشراء عن طريق إصدار أمر   `  dcrctl --wallet setticketfee<fee rate>`  و الجزء الثالث من المواقع كما في  [https://dcrstats.com](https://dcrstats.com) و [https://posmaster.info](http://posmaster.info)  التي يمكن إستخدامها لإيجاد معدل رسوم التذكرة التي تعد قابلة للشراء مع الرسوم المنخفضة للتذاكر عن المعدل المحدد.

> تذاكر منفردة

لشراء التذاكر المستخدمة للتصويت المنفرد فإنك، تحتاج فقط إلى تحديد `شكل الحساب` و` معدل الإنفاق` الحجج أثناء استخدام الأمر `شراء التذاكر`. على سبيل المثال: `dcrctl --wallet purchaseticket "default" 50`  ويمكنها إستخدام DCR من خلال حسابك لحساب التذاكر  `default` اذا كان سعر التذكرة الحالي هو الحد الأقصى أي 50 DCR.

إذا كنت ترغب في تحديد وسيطات`numtickets` أو` expiry`، يمكنك تحديد `minconf` من 1، فارغة` عنوان التذكرة` ("")، فارغة `pooladdress` (" ")، `poolfees` (0). مثالان على ذلك:

-  `dcrctl --wallet purchaseticket "default" 50 1 "" 5`  يتضمن شراء 5 تذاكر، حيث يتم تعيين الوسيطة الخامسة (`numtickets`) إلى 5.
-  `dcrctl --wallet purchaseticket "default" 50 1 "" 5 "" 0 100000` يتضمن ذلك شراء 5 تذاكر سوف تنتهي إذا لم يتم إستخلاصها من 100000 كتلة, حيث أن الحجة 8 التي تم تعينها (`إنتهاء الصلاحية`) الى 100000

<fee rate>تأكد من فحصك للضرائب ورسوم التذاكر الخاصة بك قبل الشراء عن طريق إصدار `dcrctl --wallet من رسوم التذاكر `

> تجمع التذاكر

لشراء التذاكر مع حقوق التصويت الخاصة بهم مفوضة ل ، لدينا لاستخدام كامل `لشراء التذاكر`.

-  فان  `عنوان التذاكر` هو هو عنوان P2SH وجدت في مقدمة صفحة "التذاكر" تحت قسم "معلومات التذاكر".
-  إن  `عنوانك`  هو عنوان لجمع رسوم تجمع حصة الخاص بك. ويمكنك إيجاد ذلك من خلال "تعليمات التذاكر" في صفحة "التذاكر" الخاصة بك 
-  `poolfees`  هي النسبة المئوية من مكافأة الحصة التي سوف تذهب إلى  `pooladdress` عند التصويت للتذكرة. ومن المهم أن تتناسب مع رسوم البرك المعلن عنها.

مثال سريع:

`dcrctl --wallet purchaseticket "default" 23 1 DcExampleAddr1For2Demo3PurposesOnly 1 DsExampleAddr1For2Demo3PurposesOnly 7.5` would use DCR from your `default` account to purchase 1 ticket if the current ticket price is a max of 23 DCR. The P2SH Address received from the stakepool is `DcExampleAddr1For2Demo3PurposesOnly` and their fee address is `DsExampleAddr1For2Demo3PurposesOnly`. They will collect a 7.5% fee if this ticket successfully votes. This ticket will not expire from the mempool until the ticket price changes, as only 7 arguments were specified (no `expiry`).

---

#### تكوين شراء التذاكر

لتعيين  `dcrwallet` الخاص بك لتمكين الدمج `ticketbuyer` , وإضافة السطر التالي الى ملف التكوين `dcrwallet.conf` في قسم `[Application Options]` :

إمكانية التذاكر الإختيارية=1

إذا كنت تستخدم تجمع حصة، يجب عليك أيضا إضافة الخطوات التالية  (كل هذه يمكن العثور على صفحة "التذاكر" الخاصة بك تجمع حصة):

 عنوان التذاكر=<P2SH Address shared with Stakepool>
    pooladdress=<Stakepool's Fee Collection Address>
    poolfees=<Stakepool's Required Reward Fee>

مع هذا التكوين `ticketbuyer`  يمكنك البدء في التشغيل الإفتراضي للإعدادات. وقد ترغب في تكوين  `ticketbuyer`  وذلك لفرض سلوكها - مجموعة كاملة من خيارات التكوين والقيم الافتراضية يمكن العثور عليها في المخطط [التالي] (#full-ticketbuyer-options).

مع تشغيل `ticketbuyer` و بقاء محفظتك غير مغلقة, يمكنك مشاهدة  `dcrwallet`  للنظر إن تم شراء التذاكر ام لا. حتى أنها سوف تظهر تفسيرا إذا كانت التذاكر لم يتم شراؤها.

---

## خيارات شراء التذاكر كاملة

لقد أوصينا بقراءة وفهم الخيارات المتاحة قبل استخدام الميزة حيث يمكنك تعيين الرسوم وأسعار التذاكر أعلى من المطلوب.

كل هذه الخيارات يمكن أن تكون محددة في سطر الأوامر في  dcrwallet.conf أي في قسم  `[Ticket Buyer Options]`. ولاحظ أن في هذا الوقت ليس هناك طريقة لتغيير الإعدادات  dcrwallet  قيد التشغيل: سوف تحتاج إلى إعادة تشغيله لضبط الإعدادات الخاصة بك.

العامل المتغير|الوصف|إفتراضياً|الشرح
:----------:|:---------------------------:|:----------:|:---------------------------:
ticketbuyer.avgpricemode|يتم تعطيل النمط المستخدم لحساب متوسط السعر للسعر المستهدف  (vwap, pool, dual) |vwap|!
ticketbuyer.avgpricevwapdelta|عدد كتل لاستخدامها في الكتل الحالية لحساب  VWAP |2880|!
ticketbuyer.maxfee|الحد الأقصى لرسوم التذاكر لكل kB |0.1 DCR|يتم إدخال تذاكر البركة في ترتيب رسومها لكل كيلوبايت. هذا يحدد أقصى رسوم كنت على استعداد لدفعها.
ticketbuyer.minfee|الحد الأدنى لرسوم التذاكر لكل kB |0.01 DCR|الحد الأدنى للرسوم لكل كيلو بايت كنت على إستعداد لدفعها. وهذا من المحتمل أن يترك في 0.01 إلا إذا كنت تعلم ماذا تفعله.
ticketbuyer.feesource|مصدر الرسوم لاستخدام رسوم التذاكر لكل كيلوبايت (الوسيط أو متوسط) |الوسيط|فإن الرسوم التي يختارها المشتري تذكرة سوف تستند إما الوسيط (خط جميع الرسوم حتى في النظام واختيار واحد الأوسط) أو المتوسط (المعروف أيضا باسم المتوسط؛ إضافة جميع الرسوم حتى وتقسيم 2). فمن المستحسن أن يترك هذا في المتوسط كما كانت هناك حالات التلاعب رسوم حيث يحاول الناس فرض القوة على المتوسط لشراء تذكرة واحدة ذات رسوم عالية جدا.
ticketbuyer.maxperblock|الحد الأقصى لتذاكر الكتل,  مع أرقام سلبية تشير إلى شراء تذكرة واحدة كل كتل 1 في n. |5|لا تقم بشراء أكثر من عدد التذاكر لكل كتلة. حيث أن الرقم السلبي يعني شراء تذكرة واحدة كل n كتل. مثلا -2 يعني شراء تذكرة كل كتلة ثانية.
ticketbuyer.blockstoavg|عدد الكتل إلى المتوسط ​​لحساب الرسوم |11| يتم احتساب الرسوم باستخدام العديد من القطع السابقة. ويمكنك عادة ترك هذا في الوضع الافتراضي.
ticketbuyer.feetargetscaling|عامل التحجيم لتحديد رسوم التذاكر، يتضاعف من متوسط الرسوم |1|معدل الضرائب المتعددة لهذا الرقم هو ما تم إعطاءه ليتم دفعه. ولا تقم بإحداث تغيير حتى تتأكد مما تريد فعله. لانه قد ترتفع الرسوم بشكل عالي جداً, وتذكر أن الرسوم غير قابلة للإسترداد!
ticketbuyer.dontwaitfortickets|لا تنتظر حتى الجولة الأخيرة من تذاكر تسلسل الكتل لمحاولة شراء أكثر من ذلك| |إفتراضيا, فإن مشتري التذاكر لا يستطيع شراء المزيد حتى حتى يتم إدخال جميع تلك السابقة التي تم شراؤها في سلسلة كتلة. يمكنك تعيين هذا لشراء المزيد حتى لو كان بعض لا يزال في البرك.
ticketbuyer.nospreadticketpurchases|لا تنشر مشتريات التذاكر بالتساوي في جميع أنحاء الويندوز| | إفتراضياً فإن, `ticketbuyer` ينتشر لشراء التذاكر التي قد تؤدي إلى رسوم أكثر ملاءمة. و كذلك الإعدادات تخبر أن `ticketbuyer` يمكنهم شراء التذاكر مرة واحدة.
ticketbuyer.maxinmempool|الحد الأقصى لعدد التذاكر المسموحة في البرك قبل شراء المزيد من التذاكر. |40|إذا كان لديك العديد من التذاكر في البرك، فإن المشتري لتذكرة لا يمكنه أن يشتري أكثر حتى يتم قبول بعضها في سلسلة الكتل.
ticketbuyer.expirydelta|عدد الكتل في المستقبل قبل انتهاء صلاحية التذكرة |16|يمكنك تعيين الانتهاء بحيث إذا لم يتم قبول التذاكر الخاصة بك في سلسلة كتلة بسبب ارتفاع الرسوم،فأنه سوف يتم إلغاءها ويمكنك المحاولة مرة أخرى عن طريق رفع الرسوم الخاصة بك.
ticketbuyer.maxpriceabsolute|الحد الأقصى للسعر المطلق لشراء التذكرة |0 DCR| إذا كان سعر التذكرة أعلى من هذه القيمة، فلن تشتري المزيد من التذاكر. الافتراضي 0 يتحول إلى مغلق.
ticketbuyer.maxpricerelative|عامل التحجيم لتحديد السعر الأقصى، ويتضاعف حسب متوسط السعر. |1.25|إذا كان سعر النافذة الحالي أعلى بكثير من النوافذ القليلة الماضية، لا تقم بشراء أي من التذاكر. مثلا مع القيمة الافتراضية 1.25، وإذا كان متوسط سعر النوافذ القليلة الأخيرة 50DCR، فلن تشتري أي تذاكر إذا كانت النافذة الحالية أكثر من 75DCR.
ticketbuyer.balancetomaintainabsolute|كمية من الأموال للحفاظ على المحفظة عند حصة التعدين. |0 DCR| إذا كان توازنك منخفض عن هذا العدد, فإنه لن تتمكن من شراء التذاكر. وإفتراضيا فإن 0 سوف يستخدم جميع الأموال الموجودة في حسابك لشراء التذاكر.
ticketbuyer.balancetomaintainrelative|نسبة الأموال اللازمة لمغادرة المحفظة عند حصة التعدين |0.3|مشابهاً للأمر السابق, إلا أنها تستند إلى نسبة مئوية من إجمالي الأموال.

---
