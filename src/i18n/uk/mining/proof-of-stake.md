# Майнинг на основі принципу Proof-of-Stake (доказ частки володіння), PoS-Mining 

Останнє оновлення для v1.0.0

Цей документ призначений стати навчальним ресурсом для навчання майнингу на основі принципу Proof-of-Stake mining (staking) для Decred. Він буде включати в себе мету використання протоколу Proof-of-Stake, коротке введення у процес здійснення ставок (staking), життєвий цикл тікетів та інструкції з їх купівлі. 

---

## Огляд 

Унікальний протокол Proof-of-Stake від Decred має кілька цілей:

Надати метрику тримачам ставок (stakeholders)/ підтримці кінцевих користувачів щодо будь-яких оновлень консенсусу. Тобто stakeholders можуть голосувати за конкретні пропозиції / порядок денний (agenda) на blockchain Decred. Agenda може стосуватися прийняття рішеннь щодо того, чи буде команда розробників присвячувати час реалізації певної функції, активізувати код функції, вже поданої для реалізації, або прийняття інших рішень, таких як спосіб використання субсидій розробників. Більш детальну інформацію про голосування можна знайти в нашому Посібнику щодо голосування у Mainnet [Mainnet Voting Guide](/getting-started/user-guides/agenda-voting.md).

PoS Decred також надає систему стримувань і противаг для невідповідних майнерів. Stakeholders можуть голосувати та блокувати недійсних, якщо вони не відповідають правилам консенсусу  мережі. 

---

## Здійснення ставок 101 

Щоб взяти участь у proof-of-stake mining, stakeholders блокують певну кількість DCR в обмін на тікет. Кожен власний тікет (ticket owned) надає власнику можливість проголосувати (vote) один раз. Після голосування кожен тікет повертає невелику нагороду плюс вартість початкового тікета **Ticket Price** . Кожен тікет обирається для голосування випадковим шляхом, даючи середній час приблизно 28 днів, але, можливо, вимагає до 142 днів, з вірогідністю бути простроченим до 0,5%, перш ніж бути обраним для голосування (простроченість повертає початкову вартість **Ticket Price** без винагородження). Кожен "видобутий" блок (block mined) повинен включати 5 голосів (майнерів карають зменшенням винагороди, якщо включено менше 5 голосів). Кожен "видобутий" блок також може містити покупку до 20 нових тікетів. Новий тікет потребує утворення 256 блоків, щоб "дозріти" (mature) та бути включеним у тікет-пул **Ticket Pool**, звідки може бути викликаний для голосування.

Існує кілька важливих змінних величин, з якими Вам слід ознайомитись під час здійснення ставок.

Кожні 144 блоки (~ 12 годин) алгоритм складності ставок вираховує нову **Ticket Price** з метою зберегти розмір тікет-пула в межах цільового пула (target pool) у 40960 квитків. Це 144-блокове вікно називається `StakeDiffWindowSize`.

** Вартість тікета ** / ** Ступінь складності ставок ** (Ticket Price/Stake Difficulty) - це ціна, яку Ви повинні сплатити за тікет протягом одного 144-блокового вікна.

**Тікет-пул**(Ticket Pool) - це загальна кількість тікетів в мережі Decred.

**Внесок за тікет** ("Ticket Fee",`ticketfee`) - це внесок, що включений в покупку тікета, щоб стимулювати Proof-of-Work майнерів включити цей тікет в новий блок. Ticket Fee зазвичай відносять до ставки платежу DCR / kB (DCR/kB fee rate) для транзакції покупки тікетів. Тому, при більшому розмірі транзакції, Ви насамкінець заплатите вищу кінцеву вартість. Наприклад, покупка тікету під час solo-staking становить приблизно 300 байт, що означає, що Ticket Fee 0,3 DCR / kB призведе до витрати 0,1 DCR, якщо, і тільки якщо, цей тікет буде включено в блок.

Коли **Ticket Price** стає відносно низькою для одного вікна Ticket Window **, можна очікувати формування fee market, коли багато тримачів ставок намагаються придбати тікети до закінчення вікна. Коли **Ticket Price** не є надзвичайно низькою та вигідною, **Ticket Fee**, за умовчанням дорівнює 0,01 DCR / kB зазвичай досить висока, щоб бути включеною у блок.  

Коли тікет викликається до голосування, гаманець, який має право голосу для цього тікета, повинен бути онлайн. Якщо гаманець не в мережі для голосування, тікет буде позначено як "пропущений" (`missed`), і Ви не отримаєте винагороду за цей тікет. Як рішення для тих, чий гаманець не може бути онлайн 24/7 пропонуються пули ставок (стейк-пули, stakepools).

Stakepools дозволяють тримачам ставок генерувати транзакції покупки тікетів, які дають стейк-пулу право голосувати за Ваш тікет. Вони будуть голосувати від Вашого імені, за що зазвичай стягують невелику плату за участь (до 7%), яка покриває вартість хостингу мінімум 3 серверів, необхідних для підтримання роботи стейк-пула. Ця плата відома як **Pool Fee** і стягується лише з невеликої винагороди PoS. Список стейк-пулів можна знайти [нижче] (#list-of-stakepools).

---

## Життєвий цикл тікетів 

Купити тікет для PoS досить просто (див.нижче), але що відбувається з ним після того, як Ви його придбаєте?
Тікет у основній мережі (тестова мережа використовує інші параметри) пройде через кілька етапів у своєму житті:

1. Ви купуєте тікет, використовуючи Paymetheus <!--, Decrediton,--> або гаманець dcrwallet. Загальна вартість транзакції кожного окремого тікета буде  **Ticket Price** + **Ticket Fee**(`ticketfee`).
2. Ваш тікет входить у пул пам`яті `mempool`. Тут він чекає, щоб його "видобули" майнеры PoW. Тільки 20 нових тікетів заносяться у кожний блок.
3. Тікети заносяться в блок з вищими **Ticket Fee** які мають більш високий пріоритет. Зверніть увагу, що **Ticket Fee** - це DCR за Кб транзакції. Розмір декількох загальних транзакцій - 298 байтів (solo-покупка тикета) та 539 байтів (pool-покупка тикета).
4. **A -**  Якщо Ваш тікет "видобувається" в блок, він стає "незрілим" (immature) тікетом. Цей стан триватиме 256 блоків (близько 20 годин). За цей час тікет не може голосувати. На цьому етапі ticket fee не підлягає відшкодуванню. <br /> 
**B -** Якщо ваш тікет "не видобутий", то на рахунок покупки повертаються як **Ticket Price** и **Ticket Fee**.
5. Після того, як Ваш тікет "дозрів" (256 блоків), він уходить у **Ticket Pool** і має право брати участь у голосуванні.
6. Шанс тікета проголосувати базується на розподілі Пуассона із середнім значенням 28 днів. Після 28 днів тікет має 50% шанс вже бути використаним для голосування.
7. З огляду на розмір цільового пулу (target pool size) у 40960 квитків, будь-який тікет має 99,5% ймовірність проголосувати протягом ~ 142 днів (близько 4,7 місяців). Якщо після цього часу тікет не проголосував, він вважається простроченим. Ви отримуєте відшкодування початкової **Ticket Price**.
8. Тікет може пропустити свій виклик на голосування, якщо гаманець, що голосує, не відповідає, або два дійсні блоки знаходяться в безпосередній близькості один від одного. Якщо це станеться, Ви отримаєте відшкодування початкової **Ticket Price**.
9. Після того, як тікет був проголосований, пропущений або прострочений, кошти (ticket price та сума субсидії, якщо застосовується, мінус fee) отримають статус immature ще на 256 блоків, після чого звільняються. Якщо тікет пропущений або прострочився, гаманець подає на транзакцію анулювання тікета, який потім вивільняє заблоковані вихідні дані тікета. ** ПРИМІТКА: ** На анулювання може бути подано лише для відповідного пропущеного тікета. Ви не можете відкликати тікет до того, як він пропущений.

---

## Як робити ставки 

Гаманець, відкритий та розблокований 24/7, *надзвичайно рекомендується* для процесу ставок. Будь-яка втрата часу повноцінної роботи може призвести до втрати vote та винагороди. Для тих, хто не може підтримувати персональний гаманець онлайн весь час, доступні Stakepools.

Єдина вимога для здійснення ставки - це те, що Ви купуєте тікет. Нижче Ви можете знайти посібники для придбання тікетів за допомогою [Paymetheus](#paymetheus) та [dcrwallet](#dcrwallet).

Якщо Ви маєте намір використати пул, Ви повинні спочатку там зареєструватися. Посилання на офіційно визнані стейк-пули надаються [тут](#list-of-stakepools).

---

## Paymetheus 

Додаток Paymetheus не може самостійно проголосувати, а це означає, що право на голосування потрібно передати до пула.

Будь ласка, ознайомтесь із посібником з покупки тікетів [Purchase Tickets tab guide](/getting-started/user-guides/using-paymetheus.md#purchase-tickets-tab) для Paymetheus, щоб дізнатися, як купувати тікети за допомогою Paymetheus та пула.

---

## dcrwallet 

Посібник із покупки тікетів з використанням dcrwallet(/getting-started/user-guides/dcrwallet-tickets.md) навчить, як купувати тікети в ручному та автоматичному режимі в пулі чи соло.

---

## <i class="fa fa-life-ring"></i> Список Stakepools 

Вказані стейк-пули є офіційно визнаними:

* [<i class="fa fa-external-link-square"></i> https://dcr.stakepool.net](https://dcr.stakepool.net)
* [<i class="fa fa-external-link-square"></i> https://dcr.stakeminer.com](https://dcr.stakeminer.com)
* [<i class="fa fa-external-link-square"></i> https://pool.d3c.red](https://pool.d3c.red)
* [<i class="fa fa-external-link-square"></i> https://stakepool.dcrstats.com](https://stakepool.dcrstats.com)
* [<i class="fa fa-external-link-square"></i> https://stake.decredbrasil.com](https://stake.decredbrasil.com)
* [<i class="fa fa-external-link-square"></i> https://stakepool.eu](https://stakepool.eu)
* [<i class="fa fa-external-link-square"></i> https://dcr.ubiqsmart.com](https://dcr.ubiqsmart.com)
* [<i class="fa fa-external-link-square"></i> https://ultrapool.eu](https://ultrapool.eu)

Ви можете знайти порівняння зборів та статистики кожного пулу, відвідавши сторінку
[<i class="fa fa-external-link-square"></i> Decred website](https://decred.org)
і натисніть посилання "Stakepools" у нижньому колонтитулі сторінки.

---

<!-- TODO: **Покупка тікетів з Decrediton** -->

## Додаткова інформація 

[Mainnet Voting Guide](/getting-started/user-guides/agenda-voting.md)

[Proof-of-Stake Commands](/advanced/program-options.md#pos-commands)

[Proof-of-Stake FAQ - General](/faq/proof-of-stake/general.md)

[Proof-of-Stake FAQ - Buying Tickets and Fees](/faq/proof-of-stake/buying-tickets-and-fees.md)

[Proof-of-Stake FAQ - Solo Mining](/faq/proof-of-stake/solo-mining.md)

[Proof-of-Stake FAQ - Stake Pools](/faq/proof-of-stake/stake-pools.md)

[Proof-of-Stake FAQ - Voting Tickets](/faq/proof-of-stake/voting-tickets.md)

[Proof-of-Stake Mining Parameters](/advanced/program-options.md#pos-network-parameters)
