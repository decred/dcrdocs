# Тікети для голосування (Voting Tickets) 

---

#### 1. Коли розпочалося proof-of-stake голосування? 

Proof-of-stake голосування почалося [^7969] на блоці 4,096.

---

#### 2. У вихідному коді значення TicketPoolSize встановлене як 8192, але поточний розмір пулу тікетів більше цього. Чому? 

Це зроблено навмисно і є невід'ємною частиною динамічного регулювання вартості тікета[^8965]. `TicketPoolSize` iце розмір цільового пулу тікетів, і він дуже подібний до поняття "цільова складність" для proof-of-work (PoW). Той факт, що поточний розмір тікет-пулу більший, ніж цільовий, є причиною зростання вартості тікета, що, в свою чергу, призведе до покупки меншої кількості тікетів, та поступово кількість тікетів у пулі зменшиться до цільового. Якщо вона спуститься ще нижче, вартість знизиться, щоб простимулює продажів тікетів і збільшити їхню кількість у пулі до цільового.

---

#### 3. Якщо мені не пощастило, і термін дії мого тікета закінчується без голосування, чи втрачаю я комісію за транзакцію (transaction fee)? 

Так [^9806].

---

#### 4. Голосування у головні мережі не відбувалося до блоку 4096, в той же час люди купували тікети. Чи означає це, що для цих тікетів існує значно вищий ризик закінчитися раніше? 

Ні[^9806], відлік терміну дії не починається, доки тікет фактично не видобувається до блоку. Тікети просто чекали в пулі пам'яті того моменту, поки вони зможуть бути включеними до блоків, починаючи з блоку 4096.

---

#### 5. Що трапиться, якщо ні один (або менше, ніж 3) з вибраних voters не здійснить свою ssgen-транзакцію? 

Голоси завжди визначаються поточною верхівкою блока. Майнери не починають видобування нового блоку, доки принаймні 3 + вибраних voters не здійснять свої ssgen-транзакції. Таким чино, якщо знайденому блоку не вдалося отримати обрані голоси[^10219], блок просто втрачається (orphaned) наступним блоком, знайденим іншим майнером.

Для більш конкретного прикладу припустимо, що поточна верхівка ланцюга знаходиться у блоку 5000. Voters, визначені блоком 5000, вже подали свої голоси, тому майнери збиваються з ніг, шукаючи блок 5001. Нарешті, майнер знаходить рішення для блоку 5001 і передає його в мережу. Всі daemons (і, отже, гаманці) побачать, що 5001 щойно з'явився. Проте майнери не одразу ж починають видобувати 5001. Замість цього вони продовжують видобуток 5000, допоки не з'явиться 3+ голосів за блок 5001. Тоді всі вони переключаються і починають видобуток 5001. Якщо ці 3+ голоси так і не з'явилися, інший кандидат на блок 5001 буде знайдено іншими майнерами, які все ще працюють над блоком 5000, і саме вони подадуть своє (інше) рішення для блоку 5001 у мережу. Оскільки кожен з цих нових блоків-кандидатів на 5001 має інший хеш, вибраються різні тікети.

---

#### 6. Що трапиться, якщо квиток, який я маю, пропустив голосування 

Ваш гаманець автоматично анулює тікет у блоці після того, як його пропущено[^13912], тому Ви отримуєте їх назад після того, як вони були пропущені, в якості "незрілих" коштів (це означає, що вони будуть "дозрівати" ще протягом 256 блоків і не можуть бути витрачені протягом цього часу).

Наприклад:

```no-highlight
dcrctl --wallet getstakeinfo
```

Вихід          | Опис
---             |---
`allmempooltix` | Всі тікети (stake tickets у пулі пам'яті (очікують видобування в блок).
`ownmempooltix` | Ваші тікети (stake tickets) у пулі пам'яті (очікують видобування в блок).

---

#### 7. Яка різниця між пропущеним (missed) та анульованим (revoked) тікетом? 

Пропущені тікети - це тікети, які були викликані на голосування, але не проголосували. Після того, як тікет було пропущено, його можна анулювати[^14763]. Гаманець автоматично анулює пропущені тікети, які він контролює (при умові, що його розблоковано, щоб він міг підписати транзакцію анулювання).

Усі `rebroadcastmissed` це наказ гаманцю здійснити запит у daemon мережі (`dcrd`) і знову надати йому список пропущених тікетів, щоб ше раз перевірити, чи не треба якийсь анулювати. Як правило, це необов`язково, якщо,звісно, не сталося, наприклад, що було зроблено спробу анулювати тікет, але не вдалося, оскільки гаманець був заблокований. Іншими словами, якщо Ви помітили, що кількість "revoked" не дорівнює кількості "missed", Вам може знадобитися `rebroadcastmissed`. Як вже зазначалося, така небхідність виникає рідко, оскільки гаманець автоматично робить таку перевірку при запуску і шукає пропущені тікети на кожному блоці.

Продовження [Proof-of-Work Mining](/mining/proof-of-work.md)

---

## <i class="fa fa-book"></i> Джерела 

[^7969]: Decred Forum, [Post 7,969](https://forum.decred.org/threads/531/#post-7969)
[^8965]: Decred Forum, [Post 8,965](https://forum.decred.org/threads/531/page-2#post-8965)
[^9806]: Decred Forum, [Post 9,806](https://forum.decred.org/threads/180/page-6#post-9806)
[^10219]: Decred Forum, [Post 10,219](https://forum.decred.org/threads/180/page-6#post-10219)
[^13912]: Decred Forum, [Post 13,912](https://forum.decred.org/threads/1271/#post-13912)
[^14763]: Decred Forum, [Post 14,763](https://forum.decred.org/threads/1335/#post-14763)
