# تفاصيل الصفقه

---

المعاملات المرسومة ھي تحویلات DCR التي توجد داخل كتل. تتكون المعامالت بشكل رئيسي من والمدخلات والمخرجات، على الرغم من أن لديهم عدد قليل من مجالات أخرى من البيانات كذلك.


## تنسيق المعاملة

حقل        | الوصف                                                                                    | الحجم
---          | ---                                                                                            | ---
الإصدار      | إصدار المعاملة. يستخدم هذا الرقم للدلالة على كيفية تفسير المعاملة  | 4 بايت
عدد الإدخال  | عدد المدخلات في المعاملة المشفرة كعدد صحيح لمتغيرات الطول                   | 1-9 بايت
المدخلات       | قائمة متسلسلة لجميع مدخلات الصفقة                                                | المتغير
عدد الإخراج | عدد المخرجات في المعاملات كعدد صحيح لمتغير الطول                  | 1-9 بايت
المخرجات      | قائمة متسلسلة لجميع مخرجات الصفقة                                               | المتغير
وقت القفل    | الوقت الذي تنفق فيه الصفقة. (عادة الصفر، وفي هذه الحالة ليس له أي تأثير)       | 4 بايت
الإنقضاء       | ارتفاع الكتلة الذي تنتهي فيه المعاملة التي لم تعد صالحة                       | 4 بايت


### المدخلات
تنفق المدخلات النواتج سابقة الصنع. وهناك نوعان من مدخلات الصفقة: من الشهود وغير الشهود.


#### مدخلات لغير الشاهدين
مدخلات المعاملة لغير الشاهد هي إشارة إلى النواتج غير المنفقة ورقم التسلسل. وإشارة إلى وضع غير منفقة اي ما يسمى "نقطة الخروج". نقاط خارج لديها ثلاثة مجالات:

الحقل            | الوصف                                                                                                                           | الحجم
---              | ---                                                                                                                                   | ---
تجزئة المعاملات | تجزئة الصفقة التي تحتوي على الإخراج الذي يتم إنفاقه                                                                     | 32 بايت
مؤشر المخرجات     | مؤشر المخرجات الذي يتم انفاقة                                                                                                   | 4 بايت
شجرة             | أي شجرة الإخراج التي يتم إنفاق في. وهذا مطلوب لأن هناك أكثر من شجرة واحدة تستخدم ل تحديد المعاملات في كتلة. | 1 بايت

بالإضافة إلى النقطة الخارجية، والمدخلات لغير الشهود التي تحتوي على رقم تسلسلي. هذا العدد له أهمية تاريخية أكثر من الاستخدام ذات الصلة؛ ومع ذلك، فإن الغرض الأكثر ملاءمة هو لتمكين "تأمين" المدفوعات بحيث لا يمكن أن يكون هناك استرداد حتى وقت معين.


#### مدخلات الشهود
يتضمن إدخال معاملة الشاهد البيانات اللازمة لإثبات ذلك يمكن أن ينفق الناتج. وتتضمن مدخلات الشهود أربعة حقول للبيانات:

الحقل            | الوصف
---              | ---
القيمة            | حجم القطع النقدية التي تلزم للاستهلاك خلال التبادل
ارتفاع الكتلة     | ارتفاع الكتلة تحتوي على التبادل بين الادخال وما تم صرفه محليا
كتلة المؤشر      | مؤشر الصفقة حيث يكون الناتج على ما انفق محليا
نص التوقيع | النص الذي يلبي متطلبات السيناريو في الإخراج الذي يتم إنفاقه.


### المخرجات
النواتج هي ما نقل DCR يمكن أن يكون التي تنفقها المدخلات. النواتج لديها دائما ثلاثة مجالات البيانات:

الحقل             | الوصف                                                                                     | الحجم
---               | ---                                                                                             | ---
القيمة             | كمية DCRيتم إرسالها من قبل ما تم اخراجه .                                                     | 8 بايت
الإصدار           | إصدار الإخراج. يستخدم هذا الرقم للدلالة على كيف يجب تفسير الناتج. | 2 بايت
نص المفتاح العمومي | النص البرمجي الذي يجب أن يكون موافق عن الإنفاق للإخراج                                           | المتغير

---

## التسلسل
التنسيق المعروض أعلاه ليس التنسيق الذي يتم إرسال المعاملات وتلقيها خلاله. عند إرسال أو تلقي المعاملات، فإنها يمكن أن تكون مسلسلة في عدد قليل من الطرق. الطريقة التي يجب أن تكون المعاملة التي يمكن تحديدها من نسختها. والإصدارات المعاملات تحتل أربعة بايت، ولكن هذه البايتات الأربعة هي في الواقع تستخدم لتخزين قيمتين بشكل منفصل. حيث ان أول بايتين من نسخة المعاملة تشير إلى رقم الإصدار الفعلي. ويشير البايتان الثانيين الى شكلها التسلسلي.


### تنسيقات التسلسل
عندما التسلسل، وهناك نوعان من الأجزاء الرئيسية للمعاملة: في "البادئة" وبيانات الشاهد لها.
تتكون المعاملة من:

* المدخلات (دون أي بيانات الشهود)
* المخرجات
* قفل الوقت
* الانقضاء

بيانات الشاهد من الصفقة ينطوي فقط على مدخلاتها. وحقول البيانات المدرجة من مدخلاتها تعتمد على تنسيقها والتسلسل المحدد. ويمكن أن يكون هذا التنسيق أي مما يلي:

* ** 0 (تسلسل كامل) ** - بادئة المعاملة تقع مباشرة من قبل بيانات الشهود.
* ** 1 (لا شاهد) ** - بادئة المعاملة هي البيانات الوحيدة الموجودة.
* ** 2 (الشاهد الوحيد) ** - بيانات الشاهد للصفقة هي البيانات الوحيدة الموجودة. ولكل إدخال، وهذا يشمل قيمته، ارتفاع كتلة، مؤشر كتلة، ونص التوقيع.
* ** 3 (توقيع الشاهد) ** - بيانات الشاهد للصفقة هي البيانات الوحيدة الموجودة، ويتم خلالها التسلسل لأغراض التوقيع. لكل إدخال، وهذا يشمل فقط توقيع البرنامج النصي.
* ** 4 (توقيع الشاهد مع القيمة) ** - بيانات شاهد الصفقة هي البيانات الوحيدة الموجودة، ويتم تسلسلها لأغراض التوقيع. وخلافا لشكل توقيع الشاهد، يتضمن هذا الشكل قيمة كل مدخل من قبل النص البرمجي للتوقيع.
