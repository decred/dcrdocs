# <i class="fa fa-ticket"></i> Загальні питання PoS 

---

#### 1.Що таке система Proof-of-Stake Decred? 

Система Proof-of-Stake (PoS) дозволяє власникам Decred мати право голосу в керуванні валютою. Вона має на меті надання користувачам права голосу нарівні з майнерами.
Для участі користувачі можуть придбати тікети, які входять у лотерейний пул. Кожен блок 5 тікетів вибирається з тікет-пула PoS. Якщо принаймні 3 з них підтверджують попередньо "добутий" блок,
то щойно "видобутий" блок додається до blockchain, і здійснюється виплата як майнерам, так і власникам ставок PoS (PoS stakers). Якщо блок не підтверджено PoS stakers, PoW-майнерам виплата не здійснюється, але PoS stakers її отримують. Це
відбувається, щоб стимулювати PoW-майнерів "майнити" згідно з побажаннями PoS stakers.

Ця система PoS має декілька переваг, що дозволяють вирішити проблеми, з якими зустрічаються системи, базовані тільки на PoW. Наприклад, оскільки PoS stakers мають підтвердити блоки, які "добувають" PoW-майнери, PoW-майнери не можуть
самостійно вирішити змінити правила мережі (атака 51%). Або, коли Decred здійснює значні зміни (hardforks), старий, коротший ланцюг швидко зникне через непідтвердження PoS-складовою 
ланцюга.

Система PoS винагороджуе учасників за їх ставки. Кожен Decred блок має компонент нагородження PoS (PoS reward), який буде розподілений на кожен тікет, обраний для голосування в цьому блоці. Система розроблена таким чином,
щоб середній час для обрання тікета складає 28 днів. Якщо тікет не було обрано після 40960 блоків (трохи менше 5 місяців), він буде анульований (revoked) системою. DCR, використані для придбання
тікета, повертається незалежно від того, голосує він чи ні.

Ще одна цікава особливість, можливість для якої створює ця система PoS, - це можливість голосувати з приводу порядку денного (agenda). Оскільки підтвердження блока може розглядатися як голосування (vote), то доповнивши тікети додатковими votebit-компонентами, система може відстежувати та підраховувати голоси з цілого ряду блоків. Такі голосування можуть бути про все, що завгодно.

Купуючи тікет, будь-який власник DCR може брати участь у системі Decred Proof-of-Stake.

---

#### 2. Що таке тікети? 

Тікет - це жетон (токен), який Ви купуєте для участі в системі PoS. Ви можете придбати тікети через інтерфейс командного рядка dcrctl або через GUI, например, Paymetheus[^1] або Decrediton. Кожного разу, коли Ви купуєте
тікет, Ви сплачуєте поточну вартість тікета (current ticket price) та внесок\комісію за тікет (ticket fee), використовуючи Ваші DCR. Коли тікет куплено, він йде до тимчасового пулу пам`яті (mempool). До кожного блока можна видобути 20 тікетів, і вони обираються
для "видобування" на основі їхнього внеску за кілобайт (fee per kilobyte). Оскільки видобути в блоки за певною ціною можна тільки обмежену кількість тікетів (2880), може виникнути конкуренція за те, щоб саме ці тікети були "видобуті". В цьому випадку
Ви можете збільшити fee, яку Ви готові заплатити, щоб Ваш або Ваши тікети були "добуті". Коли Ваш тікет буде видобутий, він переміститься з поточного "allmempool" до пулу "незрілих" тікетів. Після 256 блоків
(приблизно 20 годин) він "дозріває" і переходить до пулу "живих" тікетів (live ticket pool), з якого він може бути обраний для голосування.

---

#### 3. Чи потрібно постійно підключатися до мережі для участі у PoS? 

Гаманець має бути он-лайн цілодобово, щоб відповісти на голосування, якщо вибраний один з Ваших тікетів. Є два основні способи зробити це: індивидуальній гаманець (solo staking wallet), який Ви встановлюєте та постійно зберігаєте онлайн, або ж Ви
можете скористатися [stake pool](/mining/proof-of-stake.md#solo-mining-or-pool-mining). Стейк-пул - це, фактично, гаманець, керований спільнотою, якому Ви можете передати права на голосування Ваших тікетів, цей пул буде
голосувати від Вашого імені за невеликий відсоток винагороди PoS (PoS reward).

Важливо зазначити, що Ви передаєте пулу лише право на голосування, а не свої фактичні кошти. Стейк-пул ні в якому випадку не має доступу до Ваших коштів.

---

#### 4. Що таке "вартість тікета"? 

Вартість тікетів визначається алгоритмом, який спрямований на збереження розміру пула тікетів, який являє собою загальну кількість тікетів у тікет-пулі системи PoS в межах заданого розміру приблизно 40960 тікетів.
Вартість тікета буде зростати або зменшуватися відповідно до попиту на тікети, а також кількості тікетів, що в даний час знаходяться в пулі.

Кожні 144 блоки алгоритм коректує вартість тікетів. Це називається вікном покупки (buying window). Кожен блок може містити 20 нещодавно куплених тікетів. Це означає, що в кожному вікні покупки максимум 2880 тікетів
може бути додано до тикет-пула системи PoS.

Вартість тікета завжди повертається, незалежно від того, чи проголосував Ваш тікет, пропустив голосування (missed) або в нього закінчився термін дії (expired).

---

#### 5. Які є комісійні збори (fees)? 

Система PoS використовує два типи fees, txfee (також відома, як 'split' fee або спліт) та ticketfee.
	
Txfee - це комісія, яку Ви сплачуєте мережі за обробку транзакції з покупки тікета. Ця fee встановлюється низькою за умовчанням  (0,01 DCR / kB), і її не слід змінювати.
Ticketfee - це комісія чи внесок за тікет, яку Ви сплачуєте, якщо Ваш тікет "видобуто". Ця fee мотивує PoW-майнерів "добути" Ваш тікет та додати його до тікет-пула.

У випадку, якщо вікно покупки заповнене, тобто купують більше тікетів, ніж доступні для "видобутку" в цьому вікні, то буде використовуватися ticketfee для визначення, які саме тікети потраплять
до тікет-пула. Майнери PoW оберуть тікети з найвищою ticketfee.

Fees розраховуються в DCR за кілобайт. Оскільки розмір тікета становить близько 300 (solo) або 540 (pool) байтів, фактичні fees, які Ви сплачуєте, будуть нижчими, ніж Ви встановили як конкретний розмір fee (specific fee amount).

Як txfees, так і ticketfees не будуть повернуті, коли білет голосує, закінчується або пропускає голосування.

За повернення коштів на Ваш гаманець після того, як тікет проголосував або був анульований, комісійні не сплачуються.

---

#### 6. Що таке пул ставок (стейк-пул, stake pool)l? 

Стейк-пул є еквівалентом майнинг-пула, але в системі PoS. За допомогою параметрів Вашого Decred-гаманця Ви можете передати своє право на голосування до стейк-пула. Якщо Ваш тікет вибраний для голосування,
стейк-пул проголосує замість Вас, і Ви отримаєте винагороду PoS (PoS-reward), із вирахуванням комісійних пула (зазвичай 4-5%). На відміну від майнинг-пулів, PoS-reward не розподіляється серед користувачами стейк-пула. Reward повністю іде власнику тікета.

Стейк-пул дозволить Вам купувати тікети, але не тримає Ваш гаманець онлайн та розблокованим. Важливо зазначити, що Ваші кошти ніколи не полишають Ваш гаманець. Ви нічого не надсилаєте до пула,
тільки надаєте йому право голосувати від Вашого імені. Стейк-пул не має доступу до Ваших коштів.

Стейк-пул, як правило, задіюють принцип multi-wallet надмірності, маючи велику кількість гаманців, фізично розподілених по всьому світу. Це означає меншу вірогідність пропустити голосування із-за відключення одного з гаманців.
Це також скорочує час затримки між гаманцем та мережею, що може зменшити ймовірність пропущеного голосування..

---

#### 7. Що відбувається з моїми коштами, коли я купую тікет? 

Кошти, що використовуються для придбання тікетів, блокуються до того моменту, доки тікет не буде обраний для голосування або закінчиться термін його дії. Вони не можуть залишити гаманець і з'являться у розділі "lockedbytickets" Вашого гаманця.
Якщо Ваш тікет обрано для голосування, Вам буде повернено повністю суму, сплачену за тікет, а також сплачено PoS reward.

Єдині витрати при використання цієї системи - це fees, які Ви встановили. Txfee стягуватиметься як плата за транзакцію Вашого тікута через мережу. Ticketfee буде стягуватися за включення до
тікет-пул и виплачуватися PoW-майнерам. Якщо Ваш тікет не видобуто, то плата не стягується, оскільки транзакція ніколи не проходила через мережу.

У випадку, якщо Ваш тікет не був обраний для голосування, коли минуло 40960 блоків (близько 4 місяців), система скасовує Ваш тікет, а decred, які Ви заплатили за нього (мінус fees), будуть повернені назад до Вашого гаманця. 

---

#### 8. Які шанси на участь у голосуванні у мого тікета? 

TСистема PoS у Decred використовує розподілення Пуассона, щоб визначити шанси на голосування для тікету в будь-який момент часу. З огляду на заданий розмір пула у 40960 тікетів, кожен тікет має 50% шансів проголосувати
протягом 28 днів та 99,5% шансів проголосувати до закінченням терміну дії. Зверніть увагу, що ці значення змінюватимуться з розміром пула.


---

#### 9. Що таке Proof-of-Stake голосування? 

Оскільки підтвердження блоків, виконуване системою PoS, працює, як система голосування, її також можна використовувати для голосування з інших питань.

Якщо тікети обрано для підтвердження блоку, вони голосують, схвалити чи ні раніше "видобутий" блок. Потрібно, щоб 3 з 5 вибраних тікетів проголосували "так".

Після додання до тікета ще одного параметра, який не заважає підтвердженню видобутих блоків, система може відстежувати кількість тікетів, застосовуючи цей параметр до певної кількості блоків. Ви можете встановити цей параметр у своєму гаманці у будь-який час до того, як тікет проголосував.

Наприклад, Ви можете обрати колір Вашого тікета, червоний або синій, встановити цей параметр, і система буде вираховувати наступні 1000 блоків на предмет, скільки там червоних і скільки синіх тікетів. Можливо, там присутні 3000 червоних тікетів, 1500 синіх тікетів і 500, які не виділили колір..

Якщо замінити параметр "червоний або синій" опцією "так або ні", Ви маєте систему голосування, яка с часом зможе підраховувати голоси. Використовуючи систему голосування PoS, усі, хто має DCR, можуть голосувати за питання, поставлені на порядок денний (agenda).

Ця система голосування може використовуватися для будь-яких загальноорганізаційних питань. Для Decred найпоказовішим способом її використання буде голосування з hardforks, технічних змін у процесі роботи валюти. Деякі приклади:

- Збільшення максимального розміру блока.
- Зміна алгоритму, який PoS використовує для визначення вартості тікета.
- Vote on major new features for the currency (e.g. lightning network, enhanced privacy).
- Зміна PoW-алгоритма.
- Pretty much anything the community decides would be in the best interest of the currency.

Наразі розробляється платформа для участі спільноти у поданні та обговоренні порядку голосування.

---

#### 10. Що таке hardfork голосування? 

Як і будь-якій іншій криптовалюті, Decred може в певний момент знадобитися hardfork (технічні зміни).

Одним з питань порядку денного, що ставиться у системі PoS для голосування, може стати hardfork. Якщо таке питання буде висунуте, то в нову версію вихідного коду Decred hardfork вже буде включено, але він не буде активований, поки система PoS не проголосує за нього.

Для початку голосування за hardfork треба, щоб виконувалися дві критичні умови:

- По-перше, 75% PoW-майнерів повинні оновитися до останньої версії поточної версії блока мережі. Ця перевірка охоплює останню 1000 блоків.
- По-друге, 75% PoS-майнерів повинні оновитися до останньої версії. Ця перевірка охоплює останні 2016 блоків.

Після того, як ці перевірки виконані, розпочнеться процес голосування. У тікетах можна встановити додатковий параметр yes (так) / no (ні) / abstain (утриматися). Ви робите це в своєму гаманці перед тим, тікет голосує. Тікети, позначені як "утриматися", не будуть враховуватися в загальній кількості голосів.

Потім система PoS починає підраховувати тікети за допомогою цих параметрів, встановлених на попередньо визначену кількість блоків. Якщо за цей інтервал кількість голосів "так" становить 75% і більше, голосування здійснилося. Період блокування певної кількості блоків почнеться до того, як hardfork вступить в силу, таким чином у кожного є можливість оновитися і не бути виключеним з мережі під час hardfork.

Оскільки код для hardfork уже вшитий у поточну версію Decred, то розробникам не потрібно буде втручатися, а більшості PoW- та PoS-майнерів не треба оновюватися після прийняття рішення. Якщо голосування з hardfork відбулося, він буде реалізований автоматично після періоду блокування.

Голосуваня щодо hardfork може не відбутися з багатьох причин. Голосування взагалі може не розпочатися, якщо PoW-майнери або PoS-майнери не оновляться. Після цього поріг у 75% голосів може бути не досягнуто.

У разі невдалого голосування розпочнеться новий раунд з початку процесу. Це означає перевірку того, чи оновились PoW-майнери, чи обновились PoS-майнери, а потім - ще один період підрахунку голосів. Це буде продовжуватися протягом певної кількості раундів, після чого, якщо голосування не буде прийнято, це питання порядку денного буде відкладене.

---

#### 11. Чи зазнають PoS впливу великих бірж, які оперують decred своїх клієнтів? 

Кількість decred, які має людина (або біржа), не має ніякого значення для PoS. Це кількість тікетів, які Ви маєте. Кошти, котрі використовуються для придбання тікетів, заблоковані до того часу, поки куплені на них тікети не проголосують.Це означає, що
decred, задіяна в PoS, фактично не можуть бути комусь передані. Для того, щоб біржа могла використовувати decred своїх клієнтів для голосування, вони мали б вивести їх із гаманців та заблокувати на термін до 5 місяців. Люди
б помітили, що їхній баланс змінився (decred, заблоковані у PoS, не відображаються як "витрачувані" (spendable). Також вони б не могли знімати кошти, щоб біржі зазнали б значної втрати ліквідності.

Також існує жорсткий ліміт у 20 тікетів на кожний блок, тому жодна біржа не зможе наповнити пул швидше, ніж таким чином.

Нарешті, у програмі є обмеження на загальну кількість тікетів у пулі. Кожні 144 блоки (2880 тікетів) вартість тікета коригується в залежності від кількості тікетів в пулі та вартості, с якою нові тікети
були додані під час останнього вікна. Іноді вартість тікетів є настільки високою, що навіть біржа не змогла б купити багато. І пам'ятайте, що навіть якщо б вони це зробили, їх DCR заблоковані, тому
вони не зможуть купити ще, коли вартість знову знизиться.

---

#### 12. Чи зазнають PoS впливу власників великих балансів системи, а також оригінальних розробників? 

Тут застосовуються вище зазначені обмеження розміру пула. Це перешкоджає одній людині / групі наповнити пул PoS великою кількістю власних тікетів. Навіть якщо вони викупили весь пул (з величезними fees), найбільше,
що вони можуть отримати - це близько 4000 тікетів (базуючись на попередніх "вікнах тікетів", де приблизно 30DCR, зазвичай піднімаються до 100 у наступному "вікні", а максимум після цього часто перевищує 300). Таким чином, власники
великого балансу, ймовірно, можуть придбати 2 вікна. "Вікно" на 30 буде складати 86,400DCR, настпне на 100 буде 288,000 DCR. Таким чином, придбання 5760 тікетів коштувало б 374 400 DCR. Із заданим розміром пула у 40960 тікетів, 374400 DCR надасть Вам близько 14% усіх тікетів.

Now the holder could wait a couple of days for the price to drop then start buying back up again. Except that most of their funds will be locked in the ones they bought earlier (although some will have voted) so their buying power for the new window is greatly reduced. But let's say they have super capital and bought all the decred on all exchanges. So they are able to buy another two windows and replace those tickets that voted and were successful in buying all the tickets (at very high fees and/or prices). Let's say that takes them to about 25% of the tickets.

Тікети для блока обираються випадковим розподілом. Для того, щоб змусити голосування проходити певним чином, Вам знадобиться 3 з 5 голосів за даний блок, що дорівнює 60%. Навіть з величезними витратами капіталу
вони поки що менше, ніж на півдорозі до мети. І ще результат голосування не визначається на одному блоці, тому Вам буде потрібно 60% від 75% блоків у період голосування.

І ТУТ Вам все ще потрібні PoW-майнеры, щоб підтвердити голоси. Якщо вони вважають, що хтось намагається обійти систему, вони можуть вирішити не підтверджувати блоки.

Таким чином, в принципі, це майже неможливо, навіть якщо одна людина має ВЕЛИЧЕЗНИЙ відсоток DCR.

But then we come to the stake pools. Stake pools, while not having access to any of their users' funds, do have the ability to change votes on tickets assigned to them. This is why it is suggested that when joining a stake pool, people don't just go for the largest one. Decred is short for 'decentralised credit' so part of the spirit of PoS is ensuring that the PoS stake pools don't get too large in relation to the others. However, even the largest at almost 20% would still only get on average one vote per block.

Отже, Decred був спеціально розроблений для мінімізації впливу как великих PoW- та PoS-пулов, так і окремих осіб (включаючи розробників) з великими резервами. 

## <i class="fa fa-book"></i> Посилання 

[^1]: [Paymetheus Ticket Purchasing Guide](/getting-started/user-guides/using-paymetheus.md#-purchase-tickets-tab)
