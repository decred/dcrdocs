# 하이브리드 디자인 

---

에 설명 된 사오시 (follow-the-satoshi)[^1] 제도와 큰 대조를 이룬다는 것은 새로운 복권 시스템으로 티켓을 구매해야만 선택하고 소비하기 전에 만기 기간을 기다려야한다는 것이다. 블록의 티켓 선택은 블록 헤더에 포함 된 유사난수가(pseudorandomness)을 기반으로 성숙한 티켓 풀에서 사 전적으로 수행됩니다. PoW 시스템에서이 의사 난수의 조작이 어생렵되 기 때문에 티켓 선택 조작은 PoW 광부의 근본적인 비용과 관련이있습니다. 일정 기간에 걸친 티켓의 선택은 일정한 난이도에서 일정한 해시 비율로 PoW에서 블록을 얻는 확률과 유사한 확률 밀도 함수로 설명 할 수 있으며, 대략의 모드로 확률 분포를 산출히고[^2], 티켓 풀 크기의 절반에 해당합니다. 티켓 구매 가격은 지수 가중 평균 구매 티켓 수와 이전 블록의 성숙 티켓 수에 의해 결정되는 새로운 지분 난이도에 의해 규제됩니다.

PoW 블록의 유효성 검사는 다음 단계로 설명됩니다:

1. 블록은 내부에 넣을 트랜잭션을 선택하는 PoW 광부가 채굴합니다. 스테이크 시스템 관련 트랜잭션은 UTXO 세트에 삽입됩니다.
2. PoS 광부는 티켓에서 투표 거래를 생성하여 블록에 투표합니다. 투표는 이전 블록의 상단에 블록을 구축 할 수있게하고 이전 일반 트랜잭션 트리 (코인베이스 및 비 스테이크 관련 트랜잭션 포함)가 유효한지 여부를 선택합니다.
3. 또 다른 광산 광부는 광부 광부들의 투표를 삽입하면서 블록을 만들기 시작한다. 대다수의 득표는 해당 블록이 네트워크에 수용 될 수 있도록 다음 블록에 포함되어야합니다. 이 새로운 블록에서의 투표 트랜잭션 중, PoW 광부는 PoS 광부가 블록의 정규 트랜잭션 트리가 유효한지를 나타내는 플래그를 체크한다. 이러한 투표 플래그가 집계되고 다수 표결에 기반하여 이전 블록의 정규 트랜잭션 트리가 유효한지 여부를 나타 내기 위해 비트 플래그가이 블록에 설정됩니다.
4. 난이도가 네트워크 난이도를 만족하는 것으로 확인되고 블록이 블록 체인에 삽입됩니다. 이전 블록의 정규 트랜잭션 트리가 유효 한 경우 이러한 트랜잭션을 UTXO 집합에 삽입하십시오. 1로 가십시오.

포함 된 투표의 조작을 막기 위해 모든 투표 거래를 자신의 블록에 포함시키지 않으면 현재 블록에 선형 보조금 패널티가 적용됩니다. 이전 거래 트리를 무효로하는 “약한”처벌은 시스템을 보호하기 위해 필요한 작업 폐기를 방지하고 이전 블록의 보조금을 보존하는 데 관심이없는 광부가 다음 블록을 확보 할 것이라는 가정을합니다. 이것이 사실이 아닌 경우에도 높은 해시 비율을 가진 악의적 인 광부는 여전히 이전 블록의 트랜잭션 트리를 선호하여 적어도 \((\text{number for majority}/2)+1\) 투표를해야합니다.

광부가 새로운 하드 또는 소프트 포크에서 쉽게 투표 할 수 있도록 비트 플래그가 블록 헤더와 투표에 명시 적으로 추가됩니다.

---

## <i class="fa fa-book"></i> 참고 문헌 

[^1]: Bentov I., Lee C., Mizrahi A., Rosenfeld M. 2014. [활동 증명 : Bitcoin의 증명 증명을 통한 작업 증명 확장](https://decred.org/research/bentov2014.pdf).
[^2]: Nakamoto S. 2008. [Bitcoin : 피어 - 투 - 피어 전자 현금 시스템](https://decred.org/research/nakamoto2008.pdf).
