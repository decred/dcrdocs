# Запити Pull Request та співпраця з Decred 

---

Весь код для Decred зберігається на GitHub. В даному документі представлено основну інформацію про те, як ми здійснюємо співпрацю щодо кодів та деякі основні відомості про те, як можна узяти участь. Він частково базується на подібному документі з [btcsuite](https://github.com/btcsuite).

---

## Початкова підготовка 

Перший правильний крок - познайомитися з документацією  [Code Contribution Guidelines documentation](https://github.com/decred/dcrd/blob/master/docs/code_contribution_guidelines.md) для отримання чіткого уявлення про основні приципи
проекту. Цей документ в першу чергу орієнтований на кодову базу Go (Go codebase), але тим не менш, це гарно для початку.

Наступні приклади будуть розподілені на два розділи, один для проектів Go (dcrd, dcrwallet, gominer тощо), а інший - для проектів, які не використовують Go (decrediton, Paymetheus, dcrdocs і т. Д.). У будь-якому випадку обов'язково перевірте README.md у кожному проекті, якщо Вам потрібна допомога у налаш встановлення конкретного проекту.

---

## Загальна модельl 

Таким чином ми намагаємось спростити процес співробітництва, а також підтримувати високий рівень якості коду та чисту історію. Члени команди Decred повинні дотримуватися тих самих процедур, що і зовнішні учасники.

Наша модель для роботи з кодом у загальних рисах виглядає наступним чином. Якщо щось незрозуміло, не хвилюйтеся, це буде пояснено більш детально в наступних розділах.

1. Знайдіть проблему, з якою хочете працювати. Якщо ніхто її не описує, відкрийте нову з тим, що збираєтеся робити.
1. Внесіть зміни кода у гілку.
1. Вставте ці зміни у своє власне розгалуження GitHub (GitHub repo).
1. Коли Ваш код готовий до розгляду або коли Ви просто хочете отримати інформацію від інших розробників, відкрийте "Подати запит" (Pull Request (PR) на головному repo з веб-сторінки GitHub.
1. Додайте коментар до PR, в якому вкажіть, яку проблему Ви вирішуєте. Напишіть Closes # (завершується) або Fixes # (виправляється), а потім номер проблеми в одному рядку. Це дозволить GitHub автоматично зв'язати PR з проблемою та закрити проблему, коли PR закритий.
1. Ви можете запросити конкретного перевіряючого з веб-сторінки GitHub або попрохати переглянути когось з irc / slack.
1. ВСІ коди повинні бути переглянуті і отримати принаймні одне схвалення, перш ніж можуть пійти в роботу. Тільки члени команди можуть надати офіційне схвалення, але коментарі від інших користувачів заохочуються.
1. Якщо потрібно внести зміни, внесіть їх та передайте (commit) їх у свою локальну гілку.
1. Вставте (push) ці зміни до тієї гілки, яку Ви обробляли. Таким чином, вони будуть відображатися в PR, і перевіряючий може потім порівняти з попередньою версією.
1. Once your code is approved, it can be merged into master.  To keep history clean, we only allow non-fast-forward merges (that means we want a linear history).  Most PRs also must be squashed to a single commit (although if there is reason to have it as multiple commits that can be considered on a case by case basis).
1. Якщо ваш PR подається одноразово (або він може бути автоматично стиснутий GitHub), і майстер сприйняв його, перевіряючий "зливає" (merges) ваш PR. Якщо Ваша гілка була занадто далеко позаду, Вас можуть попросити пересунути (rebase) Ваш commit. Як тільки це буде зроблене і вставлене, перевіряючий об'єднає (merges) Ваш commit.

---

## Go 

ля проектів, що використовують Go, Ви можете дотримуватися цієі процедури. В якості прикладу буде використаний Dcrd. Передбачається, що у Вас вже встановлено go1.6 або новіший, та працює`$GOPATH`.

### Одноразова установка
- Зробіть розвилку dcrd на GitHub
- Запустіть наступні команди, щоб отримати dcrd, все,з ним пов`язане, та встановіть його:

```bash
$ mkdir -p $GOPATH/src/github.com/decred/
$ git clone https://github.com/decred/dcrd $GOPATH/src/github.com/decred/dcrd
$ cd $GOPATH/src/github.com/decred/dcrd
$ go dep ensure
$ go install . ./cmd/...
```

- Додайте git remote для своєї розвилки:

```bash
$ git remote add <yourname> https://github.com/<yourname>/dcrd.git
```

## Інші проекти 

Для проектів, написаних не у Go, початкова установка буде залежати від проекту. В якості прикладу я буду використовувати dcrdocs, але основні кроки однакові для будь-якого з проектів. Конкретні налаштування можна побачити в проекті README.md (наприклад, як встановити mkdocs для роботи з dcrdocs або electron для decrediton).

### Одноразова установка 
- Зробіть розвилку dcrdocs на GitHub
- Запустіть наступні команди, щоб отримати dcrd, все,з ним пов`язане, та встановіть його:

```bash
$ mkdir -p code/decred
$ cd code/decred
$ git clone https://github.com/decred/dcrdocs
$ cd dcrdocs
```

- Додайте git remote до своєї розвилки:

```bash
$ git remote add <yourname> https://github.com/<yourname>/dcrdocs.git
```

## Створення запиту (Pull Request)на додання нової функції 
- Знайдіть або створіть проблему в repo GitHub (оригіналі, не Вашій розвилці) для функції, з якою Ви хочете працювати.
- Налагодіть (Checkout) гілку нової функції, щоб розміщувати зміни, які Ви будете виконувати:

```bash
$ git checkout -b <feature_branch>
```
- Внесіть зміни, необхідні для цієї функції, і подайте (commit) їх
- Вставте (push) гілку нової функції у свою розвилку:

```bash
$ git push <yourname> <feature_branch>
```
- У браузері перейдіть на сторінку https://github.com/decred/dcrd
- Створіть запит PR на GitHub. Ви можете попросити перевіряючого на веб-сторінці GitHub або попросити когось з irc / slack.

## Переміщення одного з Ваши існуючих запитів PR 

Іноді Вас попрохають перемістити (rebase) и стиснути (squash) запит PR для найостаннішої master branch.

- Переконайтеся, що master branch є найновішою:

```bash
$ git checkout master
$ git pull
```
- Налаштуйте існуючу гілку функції та перемістіть її з інтерактивним прапором:

```bash
$ git checkout <feature_branch>
$ git rebase -i master
```
- Follow the directions presented to specify 's' meaning squash for the additional commits (the first commit must remain 'p' or 'pick').
- Напишіть одниночне коміт-повідомлення в редакторі, якого Ви налаштували для охоплення всіх включених комітів.
- Збережіть та закрийте редактор, git має створити одиночний коміт з написаним Вами повідомленням, та всіма доданими Вами комітами. Ви можете перевірити коміт командою ```git show```.
- Вставте гілку у свою розвилку:

```bash
$ git push -f <yourname> <feature_branch>
```

## Інші аспекти 

Є ще кілька речей, які слід враховувати при виконанні запиту PR. У випадку коду Go вже існує значне тестове покриття. Якщо Ви додаєте код, Ви маєте додати і тести. Якщо Ви щось виправляєте, потрібно переконатися, що Ви не порушуєте вже існуючі тести. Для коду Go у кожному repo є скрипт ```goclean.sh``` для запуску тестів і усіх статичних перевірок, які ми маємо. Ні один з кодів не буде прийнято без проходження всіх тестів. У випадку коду node.js (decrediton) весь код повинен пройти eslint. Ви можете перевірити це командою ```npm run lint```.

Нарешті, кожен repo має ЛІЦЕНЗІЮ. Ваш новий код повинен знаходитися під тією ж ЛІЦЕНЗІЄЮ, що і існуючий код, і позначений авторським правом на 'The Decred Developers'. У більшості випадків це дуже ліберальна ліцензія на ISC, але деякі repo відрізняються. Про всяк випадок перевірте repo.

Якщо у Вас є будь-які питання щодо участі, будь ласка, запитуйте на irc / slack або GitHub. Члени команди Decred (і, можливо,членів спільноти також), будуть раді допомогти.
