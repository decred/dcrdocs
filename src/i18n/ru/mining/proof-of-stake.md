# Proof-of-Stake (PoS) Mining 

Последнее обновление для v1.0.0

Этот документ призван стать образовательным ресурсом для обучения майнингу на основе принципа Proof-of-Stake mining (staking) для Decred. В него будет включены цели использования протокола Proof-of-Stake, краткое введение в процесс внесения ставок, жизненный цикл тикета и инструкции по их покупке. 

---

## Обзор 

Уникальный протокол Proof-of-Stoke от Decred преследует множество целей:

Предоставить метрику для держателей ставок / поддержки конечных пользователей любых консенсусных обновлений. То есть, держатели ставок могут голосовать по конкретным предложениям / повестке дня в блокчейне Decred. Agenda может включать в себя принятие решения о том, проводить ли команде разработчиков время, внедряя специфическую функцию, активируя код функции, уже представленной для внедрения, либо же принятие других решений, например, как следует потратить субсидию разработчиков. Более подробную информацию о голосовании можно найти в нашем Руководстве для голосования [Mainnet Voting Guide](/getting-started/user-guides/agenda-voting.md).

PoS Decred также предоставляет систему сдержек и противовесов для несоответствующих майнеров. Держатели ставок могут голосовать и блокировать недействительных, если они не соответствуют правилам консенсуса сети. 

---

## Внесение ставок 101 

Чтобы участвовать в proof-of-stake mining, stakeholders блокируют некоторое количество DCR в обмен на тикет. Каждый собственный тикет дает владельцу проголосовать один раз. После голосовании каждый тикет возвращает небольшое вознаграждение плюс стоимость первоначального тикета **Ticket Price**. Каждый тикет выбирается для голосования случайным образом, давая среднее время в 28 дней, но, возможно, требуя до 142 дней, с вероятностью быть просроченным 0,5% до того, как быть использованным для голосования (просроченность возвращает первоначальную стоимость **Ticket Price** без вознаграждения. Каждый "добытый" блок должен включать 5 голосов (майнеры наказываются уменьшением вознаграждения при включении менее 5 голосов). Каждый "добытый" блок может также включать покупку до 20 новых тикетов. Новый тикет требует образования 256 блоков для того, чтобы созреть и быть включенным в **Ticket Pool**, откуда может быть вызван для голосования.

Есть несколько важных переменных величин,с которыми Вам необходимо ознакомиться во время внесения ставок.

Каждые 144 блока (~12 часов), алгоритм сложности ставки вычисляет новую **Ticket Price** с целью сохранить размер **Ticket Pool** в пределах целевого пула в 40 960 тикетов. Это 144-блоковое окно называется `StakeDiffWindowSize`.

The **Ticket Price**/**Stake Difficulty** это цена, которую Вы должны заплатить за тикет в течение одного 144-блокового окна.

**Ticket Pool** это общее количество тикетов в сети Decred.

**Ticket Fee** (`ticketfee`) это взнос, который включен в покупку тикета, чтобы стимулировать Proof-of-Work майнеров включить этот тикет в новый блок. **Ticket Fee** обычно относится к ставке платы DCR/kB  за транзакцию покупки тикетов. Таким образом, при более высоком размере транзакции Вы, в конечном итоге, заплатите более высокую окончательную цену. Например, покупка тикета при solo-staking составляет около 300 байт, что означает Ticket Fee 0,3 DCR/kB приведет к трате  0,1 DCR если, и только если, этот тикет будет включен в блок.

Когда **Ticket Price** становится относительно низкой для одного **Ticket Window**, обычно можно ожидать формирования fee market, при этом многие держатели ставок пытаются купить тикеты до окончания окна. Когда **Ticket Price** не чрезвычайно низкая и выгодная,**Ticket Fee**, по умолчанию равная 0,01 DCR/kB обычно достаточно высока, чтобы быть включенной в блок.

Когда тикет вызывается для голосования, кошелек, имеющий право голоса по этому тикету, должен быть онлайн. Если кошелек не в сети для голосования, тикет будет отмечен как `missed` и Вы не получите за него вознаграждение. Как решение для тех, чей кошелек не может быть онлайн 24/7, предлагаются стейк-пулы.

Stakepools позволяют держателям ставок генерировать транзакции покупки тикетов, которые дают стейк-пулу право голосовать за Ваш тикет. Они будут голосовать от Вашего имени, обычно взимая небольшую плату за участие (до 7%), которая покрывает стоимость хостинга минимум 3 серверов, необходимых для поддержания работы стейк-пула. Эта плата известна как **Pool Fee** и взимается только из небольших вознаграждений PoS. Список стейк-пулов можно найти [below](#list-of-stakepools).

---

## Жизненный цикл тикетов 

Купить тикет для PoS довольно просто (см.ниже), но что происходит с ним после покупки?
Тикет в основной сети (тестовая сеть использует другие параметры) пройдет через несколько этапов в течение всей жизни:

1. Вы покупаете тикет, используя Paymetheus <!--, Decrediton,--> или кошелек dcrwallet. Общая стоимость транзакции каждого отдельного тикета будет **Ticket Price** + **Ticket Fee**(`ticketfee`).
2. Ваш тикет входит в пул памяти `mempool`.  Здесь он ожидает, чтобы его добыли майнеры PoW. Только 20 новых тикетов заносятся в каждый блок.
3. Тикеты заносятся в блок с более высокими **Ticket Fee**  имеющими более высокий приоритет. Обратите внимание, что **Ticket Fee** DCR за килобайт транзакции. Размер нескольких общих транзакций - 298 байт (solo-покупка тикета) и 539 байт (pool-покупка тикета).
4. **A -** Если Ваш тикет добыт в блок, он становится незрелым  тикетом. Это состояние длится 256 блоков (около 20 часов). За это время тикет не может голосовать. На данный момент ticket fee не может быть возмещена. <br /> 
**B -** Если Ваш тикет не добыт, то и **Ticket Price** и **Ticket Fee** возвращаются на покупающий счет.
5. После того, как Ваш тикет созрел (256 блоков), он уходит в **Ticket Pool** и имеет право участвовать в голосовании.
6. Шанс тикета проголосовать основан на распределении Пуассона со средним значением 28 дней. Через 28 дней тикет имеет 50% шанс быть использованный для голосования.
7. При условии величины целевого пула в 40960 тикетов, любой тикет имеет 99,5% вероятность голосования в течение ~142 дней (около 4,7 месяца). Если по окончании этого времени тикет не был проголосован, он истекает. Вы получаете возмещение первоначальной **Ticket Price**.
8. Тикет может пропустить свой вызов на голосование, если голосующий кошелек не отвечает или два действительных блока обнаружены в непосредственной близости друг от друга. Если это произойдет, Вы получите возмещение первоначальной **Ticket Price**.
9. После того, как тикет был проголосован, пропущен или просрочен, средства (ticket price и субсидия, если применимо, минус fee) получат статус immature еще на 256 блоков, после чего они выпускаются. Если тикет пропущен или истек, транзакция аннулирования тикета подается кошельком, который затем высвобождает заблокированные выходы тикета. **ПРИМЕЧАНИЕ.** На аннулирование может быть подано только для соответствующего пропущенного тикета. Вы не можете отозвать тикет до того, как он пропущен.

---

## Как делать ставки 

Кошелек, открытый и разблокированный 24/7, *highly recommended* для процесса ставок. Любая потеря времени полноценной работы может привести к потере vote и вознаграждения. Для тех, кто не может поддерживать личный кошелек онлайн все время, доступны Stakepools.

Другое требование для совершения ставки - покупка тикета. Ниже Вы можете найти руководства по покупке тикетов с помощью [Paymetheus](#paymetheus) and [dcrwallet](#dcrwallet).

Если Вы намерены использовать пул, Вы должны сначала зарегистрироваться в одном из них. Ссылки на официально признанные стейк-пулы [here](#list-of-stakepools).

---

## Paymetheus 

Приложение Paymetheus не может самостоятельно проголосовать, а это означает, что право на голосование должно быть передано в пул.

Пожалуйста, ознакомьтесь с руководством по покупке тикетов [Purchase Tickets tab guide](/getting-started/user-guides/using-paymetheus.md#purchase-tickets-tab) для Paymetheus, чтобы узнать, как покупать тикеты с помощью Paymetheus и пула.

---

## dcrwallet 

Руководство по покупке тикетов с использованием dcrwallet [Buying Tickets with dcrwallet](/getting-started/user-guides/dcrwallet-tickets.md) научит, как покупать тикеты в ручном и автоматическом режиме в пуле или соло.

---

## <i class="fa fa-life-ring"></i> Список Stakepools 

Данные стейк-пулы признаны официально:

* [<i class="fa fa-external-link-square"></i> https://dcr.stakepool.net](https://dcr.stakepool.net)
* [<i class="fa fa-external-link-square"></i> https://dcr.stakeminer.com](https://dcr.stakeminer.com)
* [<i class="fa fa-external-link-square"></i> https://pool.d3c.red](https://pool.d3c.red)
* [<i class="fa fa-external-link-square"></i> https://stakepool.dcrstats.com](https://stakepool.dcrstats.com)
* [<i class="fa fa-external-link-square"></i> https://stake.decredbrasil.com](https://stake.decredbrasil.com)
* [<i class="fa fa-external-link-square"></i> https://stakepool.eu](https://stakepool.eu)
* [<i class="fa fa-external-link-square"></i> https://dcr.ubiqsmart.com](https://dcr.ubiqsmart.com)
* [<i class="fa fa-external-link-square"></i> https://ultrapool.eu](https://ultrapool.eu)

Вы можете найти сравнение взносов и статистики каждого пула, перейдя к
[<i class="fa fa-external-link-square"></i> Decred website](https://decred.org)
и нажав ссылку 'Stakepools' в нижнем колонтитуле внизу страницы.

---

<!-- TODO: **Покупка тикетов с Decrediton** -->

## Дополнительная информация 

[Mainnet.Руководство по голосованию](/getting-started/user-guides/agenda-voting.md)

[Команды Proof-of-Stake](/advanced/program-options.md#pos-commands)

[Часто задаваемые вопросы о Proof-of-Stake - Общие]](/faq/proof-of-stake/general.md)

[Часто задаваемые вопросы о Proof-of-Stake - покупка тикетов и сборы](/faq/proof-of-stake/buying-tickets-and-fees.md)

[Часто задаваемые вопросы о Proof-of-Stake - покупка тикетов и сборы](/faq/proof-of-stake/solo-mining.md)

[Часто задаваемые вопросы о Proof-of-Stake - пулы ставок](/faq/proof-of-stake/stake-pools.md)

[Часто задаваемые вопросы о Proof-of-Stake - тикеты для голосования](/faq/proof-of-stake/voting-tickets.md)

[Proof-of-Stake. Mining-параметры](/advanced/program-options.md#pos-network-parameters)
